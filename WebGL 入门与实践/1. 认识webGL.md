## WebGL 产生的背景

为了打破浏览器无法原生实现3D效果的局限，各大知名公司联手制定了一种跨平台的 3D 开发标准，也就是 `WebGL 规范`



## WebGL 是什么？

WebGL 是一组基于 JavaScript 语言的图形规范，为 Web 开发者提供一套`3D图形`相关的 API

这些API能够做到：

- 让 Web 开发者使用 JavaScript 语言直接和显卡（GPU）进行通信，这门语言简称`GLSL`，我们用它来编写运行在 GPU 上的着色器程序。
- 着色器程序需要接收 CPU（WebGL 使用 JavaScript） 传递过来的数据，然后对这些数据进行流水线处理，最终显示在屏幕上，进而实现丰富多彩的 3D 应用



## WebGL 工作原理

webGL使用`渲染管线`的方式将 3D 模型数据渲染到 2D 屏幕上

- WebGL 只能够绘制`点`、`线段`、`三角形`这三种基本图元，其他复杂3D图形，由`三角形图元`以微小平面的形式绘制而成。
- 将`顶点数据`按照一系列步骤执行`模型转换`，`视图转换`，`投影转换`，转换为webGL可以接受的`裁剪空间坐标`
- 我们把最终的`变换矩阵`和`原始顶点坐标`传递给 `GPU`，GPU 的渲染管线对它们执行流水线作业:
  1. 首先进入顶点着色器阶段，利用 GPU 的并行计算优势对顶点逐个进行坐标变换。
  2. 然后进入图元装配阶段，将顶点按照图元类型组装成图形。
  3. 接下来来到光栅化阶段，光栅化阶段将图形用不包含颜色信息的像素填充。
  4. 在之后进入片元着色器阶段，该阶段为像素着色，并最终显示在屏幕上。



## 开发者需要掌握的技能

- HTML

- JavaScript

- GLSL(着色器语言)。

- 3D数学知识

  - `向量`和`矩阵`之间的表示和运算。

  

## GLSL初探

GLSL = OpenGL Shading Language,它是用来在 OpenGL 编写`着色器程序`的语言。

**着色器程序：**是在显卡（GPU）上运行的简短程序，代替了 GPU `固定渲染管线`的一部分，使 GPU 渲染过程中的某些部分允许开发者通过`编程`进行控制

**GPU渲染过程：**

1. Javascript提供数据
2. 顶点着色器绘制顶点位置
3. 图元装配，将顶点装配成三角形
4. 光栅化，用没有颜色的像素填充三角形
5. 片元着色器，用颜色填充像素

其中的1、2、5为开发者可以通过编程控制的阶段，而2和5为着色器程序控制的阶段

```txt
WebGL 的入门难度不在语言层面，而在于理解各种矩阵变换的原理。
```



## 总结

- WebGL 是一组图形 API，允许我们使用 JavaScript 控制 GPU 渲染过程，进行 3D 绘图。
- WebGL 应用由 JavaScript 程序和着色器程序构成。
- WebGL 如何将 3D 模型数据显示在 2D 屏幕上。
- WebGL 编程要素：开发者需要针对 CPU 和 GPU 进行编程，CPU 部分是 JavaScript 程序，GPU 部分是着色器程序。